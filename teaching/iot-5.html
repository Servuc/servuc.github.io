<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Thomas SELLE (aka. Servuc) - IOT TD</title>
    <link rel="stylesheet" href="/dist/style.css">
</head>
<body>

<div class="top-bar">
    <div class="top-bar-left">
        <ul class="menu">
            <li class="menu-text">IOT - TD : Introduction à Docker et Docker-Compose</li>
            <li><a href="#" data-summary="docker">Un docker pour les gouverner tous</a></li>
            <li><a href="#" data-summary="compose">Un docker compose pour les maîtriser tous</a></li>
        </ul>
    </div>

    <div class="top-bar-right">
        <ul class="menu">
            <li class="menu-text">Thomas SELLE (aka. Servuc)</li>
            <li><a href="/">Servuc.fr</a></li>
        </ul>
    </div>
</div>


<div class="slider">
    <div>
        <div class="slider-slide">
            <div class="row">
                <h1 class="padding10">IOT - TD : Introduction à Docker et Docker-Compose</h1>
                <h2>Thomas S.</h2>
                <h3 class="pull-right">2017-2018</h3>
            </div>
        </div>
    </div>

    <div>
        <h1 class="text-center" data-summary="summary">IOT - TD : Introduction à Docker et Docker-Compose</h1>
        <div class="slider-slide">
            <div class="row">
                <h2>Sommaire</h2>
                <ul>
                    <li>Un docker pour les gouverner tous</li>
                    <li>Un docker compose pour les maîtriser tous</li>
                </ul>
            </div>
        </div>
    </div>

    <div>
        <h1 class="text-center" data-summary="docker">Un docker pour les gouverner tous</h1>
        <div class="slider-slide">
            <div class="row">
                <h2>Histoire et pourquoi</h2>
                <ul>
                    <li>Créé en 2013 par Solomon Hykes</li>
                    <li>Open Source, gratuit</li>
                    <li>Support (du meilleur au pire) : Linux > Mac > Microsoft</li>
                    <li>Architecture : X86 - AMD64 - ARM (RPi)</li>
                    <li>Virtualiser l'environnement du logiciel : Un container</li>
                </ul>
            </div>
        </div>
    </div>

    <div>
        <h1 class="text-center">Un docker pour les gouverner tous</h1>
        <div class="slider-slide">
            <div class="row">
                <h2>Installation</h2>
                <p>
                    C'est par ici : <a href="https://docs.docker.com/engine/installation/linux/docker-ce/debian/" target="_blank">Debian</a> ou <a href="https://docs.docker.com/engine/installation/linux/docker-ce/ubuntu/" target="_blank">Ubuntu</a>.
                </p>
            </div>
        </div>
    </div>

    <div>
        <h1 class="text-center">Un docker pour les gouverner tous</h1>
        <div class="slider-slide">
            <div class="row">
                <h2>Dockerfile</h2>
                <p>
                    Permet de créer un environnement pour un logiciel. Plus de détails ici : <a href="https://docs.docker.com/engine/reference/builder/" target="_blank">Dockerfile référence</a>.<br />
                    Quelques commandes : <span class="code">FROM</span>, <span class="code">RUN</span>, <span class="code">VOLUME</span>, <span class="code">COPY</span>, <span class="code">ADD</span>, <span class="code">WORKDIR</span>, <span class="code">EXPOSE</span> et <span class="code">CMD</span>
                </p>
            </div>
        </div>
    </div>

    <div>
        <h1 class="text-center">Un docker pour les gouverner tous</h1>
        <div class="slider-slide">
            <div class="row">
                <h2><span class="code">FROM</span>, <span class="code">RUN</span>, <span class="code">VOLUME</span>, <span class="code">EXPOSE</span></h2>
                <p>
                    <span class="code">FROM</span> : Base de l'environnement, permet de se baser sur un container existant. Voir <a href="https://hub.docker.com/explore/" target="_blank">Docker Hub</a>;<br />
                    <span class="code">RUN</span> : Éxécute une commande shell lors de la construction du container;<br />
                    <span class="code">VOLUME</span> : Fichers/Dossiers partagés entre la machine et le container;<br />
                    <span class="code">EXPOSE</span> : Ports réseaux ouvert du container vers la machine hôte (mapping).
                </p>
            </div>
        </div>
    </div>

    <div>
        <h1 class="text-center">Un docker pour les gouverner tous</h1>
        <div class="slider-slide">
            <div class="row">
                <h2><span class="code">COPY</span>, <span class="code">ADD</span>, <span class="code">WORKDIR</span>, <span class="code">CMD</span></h2>
                <p>
                    <span class="code">COPY</span> : Copie un dossier de l'hôte vers le container à la construction;<br />
                    <span class="code">ADD</span> : Comme <span class="code">COPY</span>, mais la source peut être une URL ou une archive à dézipper si le format est connu;<br />
                    <span class="code">CMD</span> : Commande que le container doit éxécuter;<br />
                    <span class="code">WORKDIR</span> : Dossier de travaille du container (en général, racine de l'éxécutable).
                </p>
            </div>
        </div>
    </div>

    <div>
        <h1 class="text-center">Un docker pour les gouverner tous</h1>
        <div class="slider-slide">
            <div class="row">
                <h2>Exemple</h2>
                <script src="https://gist.github.com/Servuc/8e9b9bc2ba5e5189e8425871c0f8db2f.js?file=Dockerfile.php.example"></script>
            </div>
        </div>
    </div>

    <div>
        <h1 class="text-center">Un docker pour les gouverner tous</h1>
        <div class="slider-slide">
            <div class="row">
                <h2>Commande Docker</h2>
                <ul>
                    <li>
                        <b>docker build -t TAG .</b> : Construit un Dockerfile,
                    </li>
                    <li>
                        <b>docker ps</b> : Permet de connaitre les containers lancés,
                    </li>
                    <li>
                        <b>docker run -t -i NOM</b> : Lance un container,
                    </li>
                    <li>
                        <b>docker rm NOM</b> : Éteint un containeur,
                    </li>
                    <li>
                        <b>docker images</b> : Liste les containeurs disponibles,
                    </li>
                    <li>
                        <b>docker rmi IMAGE</b> : Supprime une images.
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <div>
        <h1 class="text-center" data-summary="compose">Un docker compose pour les maîtriser tous</h1>
        <div class="slider-slide">
            <div class="row">
                <h2>Docker compose</h2>
                <ul>
                    <li>Créé par Docker</li>
                    <li>Faciliter gestions des containers</li>
                    <li>Pseudo Micro Orchestrateur</li>
                    <li>Un script : <b>docker-compose.yml</b></li>
                </ul>
            </div>
        </div>
    </div>

    <div>
        <h1 class="text-center">Un docker compose pour les maîtriser tous</h1>
        <div class="slider-slide">
            <div class="row">
                <h2>Installation</h2>
                <p>
                    C'est par ici : <a href="https://docs.docker.com/compose/install/#install-compose" target="_blank">Multi-OS</a>.
                </p>
            </div>
        </div>
    </div>

    <div>
        <h1 class="text-center">Un docker compose pour les maîtriser tous</h1>
        <div class="slider-slide">
            <div class="row">
                <h2>Bases</h2>
                <p>
                    Le script <b>docker-compose.yml</b> comporte 3 parties (en général) :
                    <ul>
                        <li><span class="code">version</span> : Version de Docker-Compose ( aujourd'hui : 3 ) &rightarrow; <span class="code">version: '3'</span></li>
                        <li><span class="code">services</span> : Containers à éxécuter;</li>
                        <li><span class="code">volumes</span> : Volumes pour la persistance (non mapper sur l'host).</li>
                    </ul>
                </p>
            </div>
        </div>
    </div>

    <div>
        <h1 class="text-center">Un docker compose pour les maîtriser tous</h1>
        <div class="slider-slide">
            <div class="row">
                <h2>Services - À partir d'un Dockerfile</h2>
                <script src="https://gist.github.com/Servuc/8e9b9bc2ba5e5189e8425871c0f8db2f.js?file=docker-compose.build.yml"></script>
                <h2>Services - À partir d'une image</h2>
                <script src="https://gist.github.com/Servuc/8e9b9bc2ba5e5189e8425871c0f8db2f.js?file=docker-compose.base.yml"></script>
            </div>
        </div>
    </div>

    <div>
        <h1 class="text-center">Un docker compose pour les maîtriser tous</h1>
        <div class="slider-slide">
            <div class="row">
                <h2>Configurations</h2>
                <p>
                    <span class="code">environment</span> : Variables d'environnement spécifique au container<br />
                    <script src="https://gist.github.com/Servuc/8e9b9bc2ba5e5189e8425871c0f8db2f.js?file=docker-compose.environment.yml"></script>
                </p>
                <p>
                    <span class="code">ports</span> : Ports ouvert de l'hôte depuis le container<br />
                    <script src="https://gist.github.com/Servuc/8e9b9bc2ba5e5189e8425871c0f8db2f.js?file=docker-compose.ports.yml"></script>
                </p>
            </div>
        </div>
    </div>

    <div>
        <h1 class="text-center">Un docker compose pour les maîtriser tous</h1>
        <div class="slider-slide">
            <div class="row">
                <h2>Configurations</h2>
                <p>
                    <span class="code">devices</span> : Permet de connecter des <b>/dev</b><br />
                    <script src="https://gist.github.com/Servuc/8e9b9bc2ba5e5189e8425871c0f8db2f.js?file=docker-compose.devices.yml"></script>
                </p>
            </div>
        </div>
    </div>

    <div>
        <h1 class="text-center">Un docker compose pour les maîtriser tous</h1>
        <div class="slider-slide">
            <div class="row">
                <h2>Configurations</h2>
                <p>
                    <span class="code">depends_on</span>/<span class="code">links</span> : Dépendances des containers<br />
                    <script src="https://gist.github.com/Servuc/8e9b9bc2ba5e5189e8425871c0f8db2f.js?file=docker-compose.links.yml"></script>
                    Accès de PHP vers la database : <i>pdo://db:3306</i>
                </p>
            </div>
        </div>
    </div>

    <div>
        <h1 class="text-center">Un docker compose pour les maîtriser tous</h1>
        <div class="slider-slide">
            <div class="row">
                <h2>Configurations</h2>
                <p>
                    <span class="code">volumes</span> : Mappage des volumes<br />
                    <script src="https://gist.github.com/Servuc/8e9b9bc2ba5e5189e8425871c0f8db2f.js?file=docker-compose.volumes.yml"></script>
                </p>
            </div>
        </div>
    </div>

    <div>
        <h1 class="text-center">Un docker compose pour les maîtriser tous</h1>
        <div class="slider-slide">
            <div class="row">
                <h2>Plus loin</h2>
                <ul>
                    <li><span class="code">restart</span> : Ce qu'il faut faire en cas de fermeture;</li>
                    <li><span class="code">container_name</span> : Nom du container;</li>
                    <li><span class="code">command</span> : Réécriture de <span class="code">CMD</span> dans <b>Dockerfile</b>;</li>
                    <li><a href="https://docs.docker.com/compose/compose-file/" target="_blank">Encore plus <i class="fa fa-smile-o"></i></a></li>
                </ul>
            </div>
        </div>
    </div>

    <div>
        <h1 class="text-center">Un docker compose pour les maîtriser tous</h1>
        <div class="slider-slide">
            <div class="row">
                <h2>Exemple</h2>
                <script src="https://gist.github.com/Servuc/8e9b9bc2ba5e5189e8425871c0f8db2f.js?file=docker-compose.yml"></script>
            </div>
        </div>
    </div>

    <div>
        <h1 class="text-center">Un docker compose pour les maîtriser tous</h1>
        <div class="slider-slide">
            <div class="row">
                <h2>Commandes</h2>
                <ul>
                    <li><span class="code">docker-compose build</span> : Construit les containers;</li>
                    <li><span class="code">docker-compose up</span> : Met en route les Dockers, alloue les volumes;</li>
                    <li><span class="code">docker-compose start</span> : Après <span class="code">up</span> puis <b>CTRL+C</b>, relance les containers;</li>
                    <li><span class="code">docker-compose stop</span> : Arrête containers;</li>
                    <li><span class="code">docker-compose down</span> : Supprimes les containers (MAIS PAS les volumes);</li>
                    <li><span class="code">docker-compose logs -f</span> : Voir les logs.</li>
                </ul>
            </div>
        </div>
    </div>

</div>


<div class="slider-dots">
    Dernière maj : Voir <a href="https://github.com/Servuc/servuc.github.io">Github</a> 🐻 <span data="now">1</span> / <span data="total"></span>
</div>

<div class="slider-button-nav-prev"><i class="fa fa-arrow-circle-left"></i> Précédent</div>
<div class="slider-button-nav-next">Suivant <i class="fa fa-arrow-circle-right"></i></div>

<script src="/dist/jquery.min.js"></script>
<script src="/dist/foundation.min.js"></script>
<script src="/dist/slick.min.js"></script>
<script src="/dist/teaching.js"></script>
</body>
</html>
